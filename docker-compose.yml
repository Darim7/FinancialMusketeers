services:
  # Frontend
  react_frontend:
    container_name: react
    build:
      context: ./frontend
    ports:
      - "8080:3000"
    volumes:
      # NOTE: Right now, since we're trying to skip the rebuild
      # step while made active changes on the frontend when the
      # container is up, we will NEED YOU TO DO npm install on
      # your host machine so that all the packages is installed
      # on your host machine and thus able to be mapped to the
      # volume on the container.
      - ./frontend/public:/app/public
      - ./frontend/src:/app/src
      - ./frontend/tsconfig.json:/app/tsconfig.json
    depends_on:
      - flask_server

  # Backend
  flask_server:
    container_name: flask
    build:
      context: ./backend
      target: builder

    stop_signal: SIGINT
    ports:
      - '8000:8000'
    volumes:
      - ./backend:/app